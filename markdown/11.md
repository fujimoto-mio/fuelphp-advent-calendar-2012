FuelPHP + NetBeans + Gitで高速開発環境を整える [@LandscapeSketch](https://twitter.com/LandscapeSketch)
==============================================

こんにちは。  
 **FuelPHP Advent Calendar**初参加のタケです。

昨日は@EGMCさんの「[FuelPHP用ソーシャルログイン専用認証パッケージDsAuthでNinjAuthをもっと簡単に利用する](http://dasalog.eg2mix.com/fuel-advent2012-dsauth/)」でした。

今日の私の記事はFuelPHP + NetBeans + Gitで高速で便利な開発環境を作る手順です。

画像ばかりでしかも長くなってしまいましたが、お付き合いください。

## NetBeansのダウンロード

まずは[NetBeans公式ページ](http://ja.netbeans.org/)から、NetBeans本体をダウンロードしセットアップしてください。

![NetBeansのダウンロード](images/11/2012-12-01_12h31_27.png "NetBeansのダウンロード")

セットアップはセットアップファイルをダブルクリックするだけでOK。JDKも必要になりますので、Macは別途Oracleから入手する必要があります。

## FuelPHPを展開

FuelPHPをダウンロードし、必要な場所に展開します。

![](images/11/2012-11-21-22_42_47.png "スクリーンショット 2012-11-21 22.42.47")

## NetBeansでプロジェクトの作成

NetBeansを起動します。

![](images/11/2012-11-21-22_43_03.png "スクリーンショット 2012-11-21 22.43.03")

 

NetBeansでプロジェクトを作成します。  
 ファイル \> 新規プロジェクト　をポイント

![](images/11/2012-11-21-22.png "スクリーンショット 2012-11-21 22")

 

![](images/11/2012-11-21-22_43_13.png "スクリーンショット 2012-11-21 22.43.13")

「既存のソースを使用するPHPアプリケーション」を選択し、次へ

 

![](images/11/2012-11-21-22_43_36.png "スクリーンショット 2012-11-21 22.43.36")

プロジェクトフォルダの選択となります。  
 先ほど展開した **fuelphp** のフォルダを選び、開きます。

![](images/11/2012-11-21-22_43_47.png "スクリーンショット 2012-11-21 22.43.47")

詳細設定が出てきます。  
 プロジェクト名とは、NetBeansのプロジェクトペインに表示される名前です。私は通常、アプリケーション名を付けています。

 

## 次に実行構成の編集です

もしFTPでサーバーにアップロードする場合はここで設定をするとラクです。  
 ローカルだけで動かす場合はこの段落は無視してください。

 

![](images/11/2012-11-21-22_44_48.png "スクリーンショット 2012-11-21 22.44.48")

基本的な接続設定をします。

 

![](images/11/2012-11-21-22_45_06.png "スクリーンショット 2012-11-21 22.45.06")

この画面で「**手動**」を選択しておくと、ファイルごとにアップ、ダウン、同期が選べるメニュー追加され、不用意にファイルを更新してしまうリスクをなくせます。

 

![](images/11/2012-11-21-23_39_36.png "スクリーンショット 2012-11-21 23.39.36")

ファイルを右クリックするとこのようなメニューが現れるようになります。

 

設定が終わりましたら「終了」を押します。

## 設定完了

設定が終わるとプロジェクトとしてペインに表示されます。

![](images/11/2012-11-21-22_45_30.png "スクリーンショット 2012-11-21 22.45.30")

 

## プラグインの追加

さてここでまた**寄り道**。FuelPHP用のプラグインを追加します。

このプラグインはインストールしなくても、このあとの説明には問題ありません。時間がある人だけ読んでください。

 

NetBeansでFuelPHPを便利に使うために、プラグインが開発されています。ただ、現状はほとんど機能が搭載されていないのですが、プロジェクトのアイコンがFuelPHPタイプに変化してうれしいので入れておきます。

ダウンロードはこちら　＞　[https://github.com/junichi11/fuelphp-netbeans/downloads](https://github.com/junichi11/fuelphp-netbeans/downloads "https://github.com/junichi11/fuelphp-netbeans/downloads")

 

NetBeansの**7.2**、**7.2.1**で分かれています。

![](images/11/2012-11-21-22_51_11.png "スクリーンショット 2012-11-21 22.51.11")

バージョンが違うとインストールエラーになりますので必ずあわせてください。

 

ダウンロードすると「**.nbm**」ファイルが保存されています。  
 これがNetNeansのプラグインファイルです。

 

NetBeansに戻り、ツール \> プラグイン を開きます。

「ダウンロード済み」タブをクリック

「プラグインの追加」ボタンをクリック

先ほどダウンロードした .nbm ファイルを選択。

「インストール」をクリック

 

正常に登録されると、

![](images/11/2012-11-21-222.png "スクリーンショット 2012-11-21 22(2")

こんなアイコンに変わります。

**カワイイ！**(それだけ！？)

 

## コード補完用ファイルを持ってくる

次にコード補完をするために、[@kenji_s](https://twitter.com/kenji_s)さんのページから補完用作ります。

こちら \> [http://d.hatena.ne.jp/Kenji\_s/20120123/1327301678](http://d.hatena.ne.jp/Kenji_s/20120123/1327301678 "http://d.hatena.ne.jp/Kenji_s/20120123/1327301678")

 

autocomplete.phpを作り、ソース・ファイル直下に置きます。

![](images/11/2012-11-21-22_59_31.png "スクリーンショット 2012-11-21 22.59.31")

 

中身は[@kenji_s](https://twitter.com/kenji_s)さんのページからコピーしてください。

![](images/11/2012-11-21-22_59_41.png "スクリーンショット 2012-11-21 22.59.41")

 

このファイルを置いておくことでクラスなどのコード補完が使えます。

 

## 強力なコードテンプレートを使う

NetBeansにはカンタンに登録でき、非常に使える**コードテンプレート**が搭載されています。コードテンプレートとは、よく使うコードをわずかな文字数で呼び出せる機能です。実際に使ってみましょう。

 

今回はFuelPHPでよく使う構文

`return Response::forge(View::forge('hogehoge'));`

をテンプレートにしてみます。

 

NetBeansの　ツール \> オプション　をポイント

出てきたダイアログで　エディタ \> コードテンプレート　を開きます。

言語から　PHP　を選択します。

![](images/11/2012-11-21-23_32_03.png "スクリーンショット 2012-11-21 23.32.03")

 

右にある「新規」ボタンをクリック

![](images/11/2012-11-21-23_36_26.png "スクリーンショット 2012-11-21 23.36.26")

省略名とは実際にキーボードから打ち込む文字です。  
 すでに登録されてい名前は使えません。

 

今回は「**retview**」としてみます。

![](images/11/2012-11-21-23_38_23.png "スクリーンショット 2012-11-21 23.38.23")

 

テンプレートの編集モードになりますので、展開後のコードを書きます。

![](images/11/2012-11-21-23_38_35.png "スクリーンショット 2012-11-21 23.38.35")

具体的には

`return Response::forge(View::forge('${cursor}');`

と記入します。ちなみに　**${cursor}**　とは、コードを展開後に「カーソルをその部分に移動しろ」というテンプレート変数です。

 

OKを押して全てを閉じます。

 

ではコードを使ってみます。

コントローラーのコードを開きます。  
 **retview**とだけ打って、「tabキー」をしてください。

![](images/11/2012-11-21-23_39_06.png "スクリーンショット 2012-11-21 23.39.06")

 

![](images/11/2012-11-21-23_39_10.png "スクリーンショット 2012-11-21 23.39.10")

**ワオ！すばらしい！**

`forge('')` の中にカーソルが移っていますので、すぐに書けますね！

 

コードテンプレートは前方の変数名を取得したりするなど、たくさんの便利機能があります。

ぜひ使ってみてください。

 

## プロジェクトをGitとして初期化する

バーション管理のためにGitを使います。

まずはプロジェクトをGitのリポジトリとして初期化しましょう。

 

プロジェクト名を右クリックし、バーション管理 \> Gitリポジトリの初期化　をポイント

![](images/11/2012-11-21-23_40_39.png "スクリーンショット 2012-11-21 23.40.39")

確認が表示されますのでOKを押します。

 

![](images/11/2012-11-21-23_40_56.png "スクリーンショット 2012-11-21 23.40.56")

下部にメッセージが出て初期化の状況がわかります。  
 すぐに終わります。

 

コミットします。プロジェクト名を右クリックすると「Git」メニューが増えています。

Git \> コミット …　をポイント

![](images/11/2012-11-21-23_41_07.png "スクリーンショット 2012-11-21 23.41.07")

 

確認が表示されます。

![](images/11/2012-11-21-23_41_26.png "スクリーンショット 2012-11-21 23.41.26")

コミット・メッセージには必ず状況説明を記入します。入れないとコミットできません。  
 下半分はコミットされるファイルの一覧です。

 

緑色だったファイル名が黒色に戻り、コミットされたことがわかります。

![](images/11/2012-11-21-23_41_39.png "スクリーンショット 2012-11-21 23.41.39")

 

ちなみにファイル名の色は

**緑**＝新規追加ファイル

**青**＝変更され、コミットされていないファイル

**黒**＝コミット完了のファイル

となっています。

 

## Bitbucketの準備

次はGitホストを用意します。

 

今回はGitHubではなくて[Bitbucket](https://bitbucket.org/)を使用します。Bitbucketは無料でプライベートリポジトリを無制限に作れますので、秘密でお金をかけず作りたい人に向いています。(笑)

 

まずはBitbucketでアカウントを作成します。Bitbucketはこちら　＞　[https://bitbucket.org/](https://bitbucket.org/ "https://bitbucket.org/")

 

ログインしましたら、Repositoriesから「Create repository」を選択します。

![2012-12-01\_13h20\_39](images/11/2012-12-01_13h20_39.png "2012-12-01_13h20_39")

 

必要な項目を記入します。

![](images/11/2012-11-21-232.png "スクリーンショット 2012-11-21 23(2")

「This is a private repository」にチェックを入れますと、自分と許可した人だけが見られるプライベートリポジトリとなります。

「Create repository」を押せばリポジトリが作成されます。

 

 

次の操作のために**リポジトリURL**を取得します。

 

![2012-12-01\_13h42\_14](images/11/2012-12-01_13h42_14.png "2012-12-01_13h42_14")

上部にこのようなボタンがあります。

 

Clone　を押します。

![](images/11/2012-11-21-23.png "スクリーンショット 2012-11-21 23")

 

SSH の部分を押します。

![](images/11/2012-11-21-233.png "スクリーンショット 2012-11-21 23(3")

HTTPSを選択します。

 

すると

![](images/11/2012-11-21-2321.png "スクリーンショット 2012-11-21 23(2")

https://　から始まるURLが現れます。

このURLがNetBeansで使えます。  
 クリップボードにコピー、もしくはメモなどに貼り付けておいてください。

 

 

## Bitbucketにプッシュする

Bitbucketプッシュします。

 

NetBeansに戻り、プロジェクト名を右クリックし、Git \> リモート \> プッシュ…　をポイントします。

![](images/11/2012-11-21-23_43_47.png "スクリーンショット 2012-11-21 23.43.47")

 

登録するリポジトリの設定画面が出ます。

![](images/11/2012-11-21-231.png "スクリーンショット 2012-11-21 23")

 

リポジトリURLが最初は空になっています。

ここに**先ほどコピーしたBitbucketのリポジトリURL**を記入します。

ユーザー名、パスワードはBitbucketのログインパスワードと同じです。

次へを押します。

 

![](images/11/2012-11-21-23_44_24.png "スクリーンショット 2012-11-21 23.44.24")

何も考えず master \> master にチェックを入れます

 

![](images/11/2012-11-21-23_44_32.png "スクリーンショット 2012-11-21 23.44.32")

終了を押します。

 

正常にプッシュされるとBitbucketに反映されます。

![](images/11/2012-11-21-23_45_17.png "スクリーンショット 2012-11-21 23.45.17")

 

これでプッシュ完了です。

 

## クローンから再生

次にBitbucketからプロジェクトを読みこんでみます。

プロジェクトが無い状態からはじめます。

 

![](images/11/2012-11-21-23_49_04.png "スクリーンショット 2012-11-21 23.49.04")

NetBeansのチーム \> Git \> クローン…　をポイント

 

BitbucketのリポジトリURL、パスワードなどを入力し、次へ

 

masterを選択

![](images/11/2012-11-21-23_49_25.png "スクリーンショット 2012-11-21 23.49.25")

 

保存する親ディレクトリ、ディレクトリ名などを設定します。

![](images/11/2012-11-21-23_49_44.png "スクリーンショット 2012-11-21 23.49.44")

 

正常にクローンされると、プロジェクトを開くかどうかの質問が出ますので、「開く」を選択。

 

![](images/11/2012-11-21-23_50_46.png "スクリーンショット 2012-11-21 23.50.46")

無事に再生されました。

 

## まとめ

いかがでしたでしょうか？

だいぶ長くなってしまいました。ここまで読んでくださってありがとうございます。

 

NetBeansは動作も比較的軽く、サポート機能が充実しています。

また、設定を一括でエクスポート、インポート出来るおかげでWindows、Mac、Linuxで使いやすい環境をすぐに作り上げることができます。

未体験の方はぜひ使ってみてください。

## 明日は

あすは@seltzerさんの「Coda + FuelPHPでお手軽開発環境を作る」です。

おたのしみに！

## P.S.

完全に内容を欲張りすぎましたね・・・こんな長い記事になってしまってすみません。

>**@LandscapeSketch**
>
>
>
>Twitter: [@LandscapeSketch](https://twitter.com/LandscapeSketch)
>
>Blog: [http://worktoolsmith.com/](http://worktoolsmith.com/)

